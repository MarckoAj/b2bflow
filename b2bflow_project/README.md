# b2bflow — Desafio Estágio Python (Supabase ➜ Z-API)

Projeto de referência para:  
- Ler contatos no Supabase (banco)  
- Enviar mensagem personalizada via Z-API (WhatsApp):  
  `Olá {{nome_contato}}, tudo bem com você?`  
  Exemplo: `Olá Marcos, tudo bem com você?`  

---

## Pré-requisitos
- Python 3.10+  
- Conta no Supabase  
- Conta na Z-API (instância + token + client token)  

---

## Tabela no Supabase
Crie uma tabela `contatos` para armazenar os destinatários.
Popule com numero e nome dos destinatários.

### SQL (Database → SQL editor)
```sql
create table if not exists contatos (
  id bigint generated by default as identity primary key,
  nome_contato text,
  numero_whatsapp text
);

-- Dados de exemplo
insert into contatos (nome_contato, numero_whatsapp) values
  ('Angelita', '5511999999999'),
  ('Marcos', '5511999999999'),
  ('Marcelo Baldi', '5511999999999');
```

Observações:  
- `numero_whatsapp` deve conter apenas dígitos, incluindo DDI (ex.: Brasil = 55).

---

## Variáveis de ambiente (.env)
Copie o `.env.example` para `.env` e preencha os valores reais.

podem ser adiquiridos na aba projetos 
SUPABASE_URL
SUPABASE_KEY
link oficial : https://supabase.com/



podem ser adiquiridos após iniciar uma nova Instância web
Z_API_INSTANCE_ID
Z_API_INSTANCE_TOKEN

pode ser adiquirido na aba Segurança
Z_API_CLIENT_TOKEN
link oficial : https://www.z-api.io/


```ini

# Supabase
SUPABASE_URL="insira sua URL aqui"
SUPABASE_KEY="insira sua key aqui"


# Z-API
Z_API_INSTANCE_ID="insira seu instance ID aqui"
Z_API_INSTANCE_TOKEN="insira seu instance token aqui"
Z_API_CLIENT_TOKEN="insira sua client key aqui"
```

---

## Instalação e execução

### Criar ambiente virtual
```bash
python -m venv .venv

# Windows
.venv\Scripts\activate

# macOS/Linux
source .venv/bin/activate
```

### Instalar dependências
```bash
pip install -r requirements.txt
```

---

## Executar o projeto
```bash
# Rodar em modo simulado (DRY_RUN=true)
python src/main.py

# Rodar realmente (envios reais)
python src/main.py
```

---

## Observações finais
- Nunca commitar o arquivo `.env` no repositório público.
- Garanta que o formato dos números siga o padrão DDI + DDD + número.
